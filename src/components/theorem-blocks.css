/**
 * Theorem Block Styles
 * Mathematical theorem environments inspired by academic papers
 */

.theorem-block {
  margin: 1.5rem 0;
  padding: 1rem 1.25rem;
  border-left: none;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 4px;
}

.theorem-header {
  font-family: var(--font-geist-sans), sans-serif;
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  display: flex;
  gap: 0.5rem;
  align-items: baseline;
}

.theorem-label {
  text-transform: lowercase;
  color: var(--foreground);
  letter-spacing: 0.01em;
}

.theorem-title {
  font-weight: 400;
  font-style: italic;
  color: var(--muted);
}

.theorem-content {
  font-size: 1rem;
  line-height: 1.6;
  color: var(--foreground);
  overflow-x: auto;
  overflow-y: visible;
}

.theorem-content p:first-child {
  margin-top: 0;
}

.theorem-content p:last-child {
  margin-bottom: 0;
}

/* Specific theorem type styles */
.theorem-theorem,
.theorem-lemma,
.theorem-corollary,
.theorem-proposition {
  background: hsla(var(--hue), 10%, 50%, 0.06);
}

.theorem-theorem .theorem-label,
.theorem-lemma .theorem-label,
.theorem-corollary .theorem-label,
.theorem-proposition .theorem-label {
  font-weight: 700;
  color: hsl(var(--hue), 20%, 35%);
}

.theorem-definition {
  background: hsla(var(--hue), 60%, 50%, 0.04);
}

.theorem-definition .theorem-label {
  color: hsl(var(--hue), 60%, 40%);
}

.theorem-example {
  background: hsla(calc(var(--hue) + 120), 50%, 50%, 0.04);
}

.theorem-example .theorem-label {
  color: hsl(calc(var(--hue) + 120), 50%, 40%);
}

.theorem-remark,
.theorem-observation,
.theorem-notation {
  background: hsla(0, 0%, 50%, 0.04);
}

.theorem-remark .theorem-label,
.theorem-observation .theorem-label,
.theorem-notation .theorem-label {
  color: hsl(0, 0%, 45%);
}

.theorem-conjecture,
.theorem-claim {
  background: hsla(calc(var(--hue) + 60), 55%, 50%, 0.04);
}

.theorem-conjecture .theorem-label,
.theorem-claim .theorem-label {
  color: hsl(calc(var(--hue) + 60), 55%, 40%);
}

.theorem-axiom {
  background: hsla(calc(var(--hue) + 180), 50%, 50%, 0.04);
}

.theorem-axiom .theorem-label {
  color: hsl(calc(var(--hue) + 180), 50%, 40%);
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  .theorem-block {
    background: rgba(255, 255, 255, 0.02);
  }

  .theorem-theorem,
  .theorem-lemma,
  .theorem-corollary,
  .theorem-proposition {
    background: hsla(var(--hue), 10%, 50%, 0.08);
  }

  .theorem-theorem .theorem-label,
  .theorem-lemma .theorem-label,
  .theorem-corollary .theorem-label,
  .theorem-proposition .theorem-label {
    color: hsl(var(--hue), 20%, 65%);
  }

  .theorem-definition {
    background: hsla(var(--hue), 60%, 50%, 0.08);
  }

  .theorem-definition .theorem-label {
    color: hsl(var(--hue), 60%, 60%);
  }

  .theorem-example {
    background: hsla(calc(var(--hue) + 120), 50%, 50%, 0.08);
  }

  .theorem-example .theorem-label {
    color: hsl(calc(var(--hue) + 120), 50%, 60%);
  }

  .theorem-remark,
  .theorem-observation,
  .theorem-notation {
    background: hsla(0, 0%, 50%, 0.06);
  }

  .theorem-remark .theorem-label,
  .theorem-observation .theorem-label,
  .theorem-notation .theorem-label {
    color: hsl(0, 0%, 60%);
  }

  .theorem-conjecture,
  .theorem-claim {
    background: hsla(calc(var(--hue) + 60), 55%, 50%, 0.08);
  }

  .theorem-conjecture .theorem-label,
  .theorem-claim .theorem-label {
    color: hsl(calc(var(--hue) + 60), 55%, 60%);
  }

  .theorem-axiom {
    background: hsla(calc(var(--hue) + 180), 50%, 50%, 0.08);
  }

  .theorem-axiom .theorem-label {
    color: hsl(calc(var(--hue) + 180), 50%, 60%);
  }
}

/* Nested math in theorem blocks */
.theorem-content .math {
  font-size: inherit;
}

/* Enable scrolling for long math expressions */
.theorem-content .katex-display {
  overflow-x: auto;
  overflow-y: visible;
  padding: 0.5rem 0;
  /* Lazy render math that's off-screen */
  content-visibility: auto;
  contain-intrinsic-size: auto 3rem;
}

.theorem-content .katex {
  white-space: nowrap;
}

/* Lazy render inline math */
.theorem-content .katex-inline {
  content-visibility: auto;
  contain-intrinsic-size: auto 1.5rem;
}

/* Lazy render entire theorem blocks */
.theorem-block {
  content-visibility: auto;
  contain-intrinsic-size: auto 10rem;
}

/* Better mobile scrolling */
@media (max-width: 768px) {
  .theorem-content {
    /* Enable smooth scrolling on touch devices */
    -webkit-overflow-scrolling: touch;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .theorem-block {
    padding: 0.875rem 1rem;
    margin: 1.25rem 0;
  }

  .theorem-header {
    font-size: 0.85rem;
  }
}
